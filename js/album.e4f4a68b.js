(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["album"],{"0d26":function(t,s,n){},"13c0":function(t,s,n){"use strict";var o=n("e0d9"),i=n.n(o);i.a},3441:function(t,s,n){},b137:function(t,s,n){"use strict";var o=n("0d26"),i=n.n(o);i.a},d74b:function(t,s,n){"use strict";var o=n("3441"),i=n.n(o);i.a},e0d9:function(t,s,n){},ee18:function(t,s,n){"use strict";n.r(s);var o=function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"album"},[n("Header"),n("ShowList",{attrs:{total:t.total},on:{loadShowList:t.loadShowList}})],1)},i=[],e=(n("96cf"),n("3b8d")),a=function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("van-list",{staticClass:"show-list",attrs:{finished:t.finished,"finished-text":"没有更多了"},on:{load:t.onLoad},model:{value:t.loading,callback:function(s){t.loading=s},expression:"loading"}},t._l(t.showList,function(s){return n("div",{key:s.id,staticClass:"show",on:{click:function(n){return t.play(s)}}},[n("div",{staticClass:"title"},[t._v(t._s(s.name))]),n("div",{staticClass:"duration"},[t._v("时长"+t._s(t.formatTime(s.duration)))])])}),0)},c=[],l=n("2ef0"),r=n.n(l),u=n("c1df"),h=n.n(u),d=n("2f62"),f={data:function(){return{loading:!1,finished:!1}},props:["total"],computed:Object(d["d"])(["showList","showIndex"]),methods:{onLoad:r.a.throttle(function(){this.loading=!0,this.$emit("loadShowList",this.showIndex),this.$store.dispatch("setShowIndex",this.showIndex+1),0!==this.showList.length&&this.showList.length>=this.total&&(this.finished=!0),this.loading=!1,console.log(this.showList.length,this.total)},1e3),play:function(t){this.$store.dispatch("sendShow",t)},formatTime:function(t){return h.a.utc(1e3*t).format("HH:mm:ss")}}},m=f,w=(n("13c0"),n("2877")),v=Object(w["a"])(m,a,c,!1,null,"5de00c41",null),b=v.exports,g=function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("header",{staticClass:"album-header"},[n("div",{staticClass:"mask",style:{background:"url("+t.albumInfo.cover+")"}}),n("div",{staticClass:"header-left",on:{click:function(s){return t.$router.back()}}},[n("i",{staticClass:"iconfont icon-return"})]),n("div",{staticClass:"title"},[t._v("\n    "+t._s(t.albumInfo.name)+"\n    "),t.albumInfo.icon?n("span",{staticClass:"icon"},[t._v(t._s(t.albumInfo.icon))]):t._e()]),n("div",{staticClass:"info"},[n("div",{staticClass:"cover"},[n("img",{attrs:{src:t.albumInfo.cover,alt:t.albumInfo.name}})]),n("div",{staticClass:"text"},[n("div",{staticClass:"meta"},[t._v(t._s(t.albumInfo.score?t.albumInfo.score.toFixed(1)+"分 | ":"")+t._s(t.formatDate(t.albumInfo.upload))+"更新")]),n("div",{staticClass:"desc"},[t._v(t._s(t.albumInfo.desc))])])])])},p=[],I=(n("ac6a"),{data:function(){return{albumInfo:{}}},methods:{getAlbumInfo:function(t){var s=this;this.$store.state.albumList.list.forEach(function(n){n.id===t&&(s.albumInfo=n)}),console.log(this.albumInfo)},formatDate:function(t){return h.a.unix(t).format("YYYY年YY月DD日")}},mounted:function(){this.getAlbumInfo(this.$route.query.id)}}),_=I,L=(n("b137"),Object(w["a"])(_,g,p,!1,null,null,null)),S=L.exports,C=n("f8c8"),x={data:function(){return{total:0}},methods:{getShowList:function(){var t=Object(e["a"])(regeneratorRuntime.mark(function t(s){var n,o,i,e=arguments;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return n=e.length>1&&void 0!==e[1]?e[1]:0,o=this,t.next=4,C["a"].getShowIdList(s).then(function(t){return t});case 4:i=t.sent,localStorage["showIdList_".concat(s)]=JSON.stringify(i),this.total=i.length,console.log(this.total),C["a"].getShow(s,r.a.chunk(i,15)[n]).then(function(t){t=o.$store.state.showList.concat(t),o.$store.dispatch("setShowList",t)});case 9:case"end":return t.stop()}},t,this)}));function s(s){return t.apply(this,arguments)}return s}(),loadShowList:function(t){console.log(t),this.getShowList(this.$route.query.id,t)}},mounted:function(){this.$store.dispatch("setShowList",[]),this.$store.dispatch("setShowIndex",0)},components:{ShowList:b,Header:S}},$=x,k=(n("d74b"),Object(w["a"])($,o,i,!1,null,"61a670e3",null));s["default"]=k.exports}}]);
//# sourceMappingURL=album.e4f4a68b.js.map